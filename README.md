# HX Streamer Pro

LAN screen streaming suite with two desktop apps:

- `main.py`: sender (capture screen center and stream JPEG frames via TCP/UDP)
- `receiver.py`: receiver (listen on LAN and preview incoming JPEG frames)

## Tech Stack

- Python 3.11+
- PyQt6 UI
- OpenCV + NumPy
- MSS screen capture
- `uv` for environment and dependency management
- `Nuitka` for production builds

## License

This project is licensed under **GNU General Public License v3.0**.

See `LICENSE`.

## Privacy Policy

A Microsoft Store-friendly privacy statement is provided at:

- `PRIVACY_POLICY.md`

For Microsoft Store submission, publish this policy at a public URL and use that URL in Partner Center.

## Local Setup (uv)

1. Install uv: https://docs.astral.sh/uv/
2. Sync dependencies:

```powershell
uv sync
```

3. Run sender:

```powershell
uv run python main.py
```

4. Run receiver:

```powershell
uv run python receiver.py
```

## Receive Troubleshooting

If receiver cannot get frames:

1. Receiver host: set `Bind IP` to `0.0.0.0`.
2. Sender host: set `Target IP` to receiver LAN IP (for example `192.168.x.x`), not `127.0.0.1` unless same machine.
3. Keep protocol and port identical on both apps.
4. For UDP, reduce sender quality/resolution if packets are too large.
5. Windows Firewall may block inbound traffic on first run, allow access for private network.

## Build With Nuitka (Local)

Install build dependencies (Nuitka + zstandard):

```powershell
uv sync --group build
```

Build both apps (Windows onefile mode):

```powershell
uv run --group build python scripts/build_nuitka.py --platform windows --mode onefile --app all --clean
```

Artifacts:

- `build/nuitka/windows-native/sender/HX_Streamer_Pro.exe`
- `build/nuitka/windows-native/receiver/HX_Receiver_Pro.exe`

`zstandard` is included in the build dependency group so onefile compression remains enabled and output size is reduced.

Both sender and receiver now set taskbar/window icon at runtime and include `logo.ico` in build outputs.

Note for Windows local builds: if your project path contains non-ASCII characters, Nuitka may fail during DLL scanning. Use an ASCII path (for example `C:\src\HX-Streamer-Pro`) or build through GitHub Actions.

## macOS Intel + Apple Silicon + DMG

You cannot produce native Intel and Apple Silicon binaries from a Windows host reliably.  
This repo includes GitHub Actions workflow to build both:

- Intel: `macos-13` with `--macos-target-arch=x86_64`
- Apple Silicon: `macos-14` with `--macos-target-arch=arm64`
- DMG packaging enabled via Nuitka `--macos-app-create-dmg`

Workflow file:

- `.github/workflows/build-nuitka.yml`

Trigger it from **Actions -> Build With Nuitka -> Run workflow**.

## Project Management

Dependencies and build groups are managed by:

- `pyproject.toml`
- `uv.lock` (generated by `uv lock`)

## Release (v1.0.0)

This repo is configured to publish release artifacts via GitHub Actions when a `v*` tag is pushed.

Example:

```powershell
git tag -a v1.0.0 -m "Release v1.0.0: fix receiver bug"
git push origin v1.0.0
```

The workflow builds:

- Windows onefile EXE
- macOS Intel artifacts
- macOS Apple Silicon artifacts

Then it creates a GitHub Release and uploads zipped build artifacts automatically.
